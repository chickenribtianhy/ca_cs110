#include <stdio.h>
#include "lcd/lcd.h"
#include <string.h>
#include "utils.h"
#include <stdio.h>
#include <stdlib.h>

void Inp_init(void)
{
    gpio_init(GPIOA, GPIO_MODE_IN_FLOATING, GPIO_OSPEED_50MHZ, GPIO_PIN_8);
}

void Adc_init(void)
{
    rcu_periph_clock_enable(RCU_GPIOA);
    gpio_init(GPIOA, GPIO_MODE_AIN, GPIO_OSPEED_50MHZ, GPIO_PIN_0 | GPIO_PIN_1);
    RCU_CFG0 |= (0b10 << 14) | (1 << 28);
    rcu_periph_clock_enable(RCU_ADC0);
    ADC_CTL1(ADC0) |= ADC_CTL1_ADCON;
}

void IO_init(void)
{
    Inp_init(); // inport init
    Adc_init(); // A/D init
    Lcd_Init(); // LCD init
}

u8 dino_0[24][22] = {
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1},
    {0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0},
    {1, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0},
    {1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0},
    {1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0},
    {0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}};

u8 dino_1[24][22] = {
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1},
    {0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0},
    {1, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0},
    {1, 0, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {1, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0},
    {1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0},
    {0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0}};

u8 dino_2[24][22] = {
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1},
    {0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0},
    {1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0},
    {1, 0, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0},
    {0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0},
    {0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0}};

u8 dino_3[15][29] = {
    {1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
    {1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
    {1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1},
    {1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1},
    {0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1},
    {0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}};
u8 dino_4[15][29] = {
    {1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},
    {1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
    {1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1},
    {1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1},
    {0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0},
    {0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0},
    {0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}};
u8 dino_6[24][22] = {
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1},
    {0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0},
    {1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0},
    {1, 0, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0},
    {1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0},
    {0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0},
    {0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0}};

u8 cactus_0[24][11] = {
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1},
    {0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1},
    {1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0},
    {1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0},
    {0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0}};
u8 cactus_1[24][14] = {
    {0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 0},
    {0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
    {0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},
    {0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0}};
u8 cactus_2[24][11] = {
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 0},
    {1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1},
    {0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0},
    {0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0}};
u8 cactus_3[24][14] = {
    {0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1},
    {1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
    {0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0},
    {0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0}};
u8 cactus_4[24][18] = {
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 1, 0, 0, 1, 1, 1, 0, 0, 1, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1},
    {0, 1, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0},
    {0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0}};
u8 cactus_5[24][11] = {
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 0, 1, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1},
    {0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1},
    {1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1},
    {1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0},
    {1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0},
    {0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0}};

u8 dragon_0[21][23] = {
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 1, 1, 0, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0},
    {1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0},
    {1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1},
    {0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}};
u8 dragon_1[21][23] = {
    {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0},
    {1, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0},
    {0, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0},
    {0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1},
    {0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}};

u8 fire[21][12] = {
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0},
    {1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0},
    {1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 0},
    {0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0},
    {1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0},
    {0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1},
    {0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 1},
    {1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0},
    {0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0},
    {0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 0},
    {1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0},
    {0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0},
    {1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}};

u8 stone[5][300] =
    {{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
     {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
     {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
     {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0},
     {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}};

u8 occupy_table[64][30];
void print_cactus(int x, int y);

struct Point
{
    u8 x;
    u8 y;
};
typedef struct Point Point;

struct Point_barrier
{
    int x;
    int y;
};
typedef struct Point_barrier Point_barrier;
struct Barrier
{
    Point barrier_point;
    int barrier_status;
    int fire_status;
    int firetime;
};
typedef struct Barrier Barrier;

#define Rest 100
#define Fire 101
// struct Stone
// {
//     u16 height;
//     // u16 width;
//     bool status;
// };

#define Barrier_empty 20
#define Cactus_0 30
#define Cactus_1 31
#define Cactus_2 32
#define Cactus_3 33
#define Cactus_4 34
#define Cactus_5 35
#define Dragon_0 36
#define Dragon_1 37

struct Game
{
    // attributes
    bool game_status;
    bool game_diff; // 0: easy, 1: hard
    int dino_last_status;
    int dino_status;
    int dino_feet;
    // bool dino_jumping_status; // 0: up, 1: down
    float dino_jumping_v;
    Point dino_point;
    // float game_speed;
    // struct timeval start_time;
    int score;
    Barrier cactus[2];
    int no_cactus;
    Barrier dragon[2];
    int no_dragon;
    int last_barrier;
    // struct Stone stone[160];
    int stone_index;
    bool collision;
};
typedef struct Game Game;

#define Running 0
#define Jumping 1
#define Bowing 2
#define Dropping 5

#define Left 3
#define Right 4

#define Dino_size_x 22
#define Dino_size_y 24
void LCD_ShowDino(Game *g)
{
    u8 x = g->dino_point.x;
    u8 y = g->dino_point.y;
    // sown, left
    if (g->dino_last_status == Jumping || g->dino_last_status == Dropping)
    {
        for (int i = 0; i < Dino_size_x; ++i)
            for (int j = -20; j < 0; ++j)
                LCD_DrawPoint(x + i, (u8)(y + j), BLACK);
    }

    if (g->dino_status == Running && g->dino_feet == Left)
    {
        for (int i = 0; i < Dino_size_x; ++i)
            for (int j = 0; j < Dino_size_y; ++j)
            {
                if (dino_0[j][i] == 1)
                {
                    LCD_DrawPoint(x + i, y + j, WHITE);
                    if (occupy_table[y + j][x + i - 10] == 1)
                    {
                        g->collision = TRUE;
                        // return;
                    }
                }
                else
                    LCD_DrawPoint(x + i, y + j, BLACK);
            }
        if (g->dino_last_status == Bowing)
            for (int i = Dino_size_x; i < 29; ++i)
                for (int j = Dino_size_y - 15; j < Dino_size_y; ++j)
                    LCD_DrawPoint(x + i, y + j, BLACK);

        // g->dino_status = Running_right;
        g->dino_last_status = Running;
        g->dino_feet = Right;
        return;
    }
    // down, right
    if (g->dino_status == Running && g->dino_feet == Right)
    {
        for (int i = 0; i < Dino_size_x; ++i)
            for (int j = 0; j < Dino_size_y; ++j)
            {
                if (dino_1[j][i] == 1)
                {
                    LCD_DrawPoint(x + i, y + j, WHITE);
                    if (occupy_table[y + j][x + i - 10] == 1)
                    {
                        g->collision = TRUE;
                        // return;
                    }
                }
                else
                    LCD_DrawPoint(x + i, y + j, BLACK);
            }
        if (g->dino_last_status == Bowing)
            for (int i = Dino_size_x; i < 29; ++i)
                for (int j = Dino_size_y - 15; j < Dino_size_y; ++j)
                    LCD_DrawPoint(x + i, y + j, BLACK);

        // g->dino_status = Running_left;
        // g->dino_status = Jumping;
        // g->dino_status = Bowing_left;
        g->dino_last_status = Running;
        g->dino_feet = Left;
        return;
    }
    if (g->dino_status == Jumping)
    {
        for (int i = 0; i < Dino_size_x; ++i)
            for (int j = 0; j < Dino_size_y; ++j)
            {
                if (dino_2[j][i] == 1)
                {
                    LCD_DrawPoint(x + i, y + j, WHITE);
                    if (occupy_table[y + j][x + i - 10] == 1)
                    {
                        // LCD_ShowString(50, 30, "faq", WHITE);
                        g->collision = TRUE;
                        return;
                    }
                }
                else
                    LCD_DrawPoint(x + i, y + j, BLACK);
            }
        if (g->dino_last_status == Bowing)
            for (int i = Dino_size_x; i < 29; ++i)
                for (int j = Dino_size_y - 15; j < Dino_size_y; ++j)
                    LCD_DrawPoint(x + i, y + j, BLACK);

#define Jumping_step 12
#define Jumping_acc 3
        if (g->dino_jumping_v > 0)
        {
            u8 step = (u8)(g->dino_jumping_v);
            g->dino_point.y -= step;
            for (int i = 0; i < Dino_size_x; ++i)
                for (int j = Dino_size_y; j <= Dino_size_y + step + 2; ++j)
                    LCD_DrawPoint(x + i, y + j, BLACK);
        }
        else if (g->dino_jumping_v < 0)
        {
            // update vertical speed
            u8 step = (u8)(-g->dino_jumping_v);
            g->dino_point.y += step;
            for (int i = 0; i < Dino_size_x; ++i)
                for (int j = (int)(g->dino_jumping_v - 1); j < 0; ++j)
                    LCD_DrawPoint(x + i, (u8)(y + j), BLACK);
        }
        else
        { /* keep still */
            for (int i = 0; i < Dino_size_x; ++i)
                for (int j = Dino_size_y; j <= Dino_size_y + 3; ++j)
                    LCD_DrawPoint(x + i, y + j, BLACK);
        }
        g->dino_jumping_v = g->dino_jumping_v - Jumping_acc;
        if (g->dino_point.y >= 40)
        {
            // g->dino_status = Bowing_left;
            g->dino_status = Running;
            g->dino_feet = Left;
            // reset
            g->dino_jumping_v = Jumping_step;
            g->dino_point.x = 10;
            g->dino_point.y = 40;
        }
        g->dino_last_status = Jumping;
        return;
    }
    if (g->dino_status == Bowing && g->dino_feet == Left)
    {
        for (int i = 0; i < 29; ++i)
            for (int j = 0; j < 15; ++j)
            {
                if (dino_3[j][i] == 1)
                {
                    LCD_DrawPoint(x + i, y + j + 9, WHITE);
                    if (occupy_table[y + j + 9][x + i - 10] == 1)
                    {
                        g->collision = TRUE;
                        // return;
                    }
                }
                else
                    LCD_DrawPoint(x + i, y + j + 9, BLACK);
            }
        if (g->dino_last_status != Bowing)
            for (int i = 0; i < Dino_size_x; ++i)
                for (int j = 0; j < Dino_size_y - 15; ++j)
                    LCD_DrawPoint(x + i, y + j, BLACK);

        // g->dino_status = Bowing_right;
        g->dino_status = Running;
        g->dino_last_status = Bowing;
        g->dino_feet = Right;
        return;
    }
    if (g->dino_status == Bowing && g->dino_feet == Right)
    {
        for (int i = 0; i < 29; ++i)
            for (int j = 0; j < 15; ++j)
            {
                if (dino_4[j][i] == 1)
                {
                    LCD_DrawPoint(x + i, y + j + 9, WHITE);
                    if (occupy_table[y + j + 9][x + i - 10] == 1)
                    {
                        g->collision = TRUE;
                        // return;
                    }
                }
                else
                    LCD_DrawPoint(x + i, y + j + 9, BLACK);
            }
        if (g->dino_last_status != Bowing)
            for (int i = 0; i < Dino_size_x; ++i)
                for (int j = 0; j < Dino_size_y - 15; ++j)
                    LCD_DrawPoint(x + i, y + j, BLACK);

        // g->dino_status = Bowing_left;
        g->dino_status = Running;
        g->dino_last_status = Bowing;
        g->dino_feet = Left;
        return;
    }
    if (g->dino_status == Dropping)
    {
        for (int i = 0; i < Dino_size_x; ++i)
            for (int j = 0; j < Dino_size_y; ++j)
            {
                if (dino_2[j][i] == 1)
                {
                    LCD_DrawPoint(x + i, y + j, WHITE);
                    if (occupy_table[y + j][x + i - 10] == 1)
                    {
                        g->collision = TRUE;
                        return;
                    }
                }
                else
                    LCD_DrawPoint(x + i, y + j, BLACK);
            }
        for (int i = Dino_size_x; i < 29; ++i)
            for (int j = Dino_size_y - 15; j < Dino_size_y; ++j)
                LCD_DrawPoint(x + i, y + j, BLACK);

#define Dropping_acc 15
        if (g->dino_jumping_v > 0)
        {
            u8 step = (u8)(g->dino_jumping_v);
            g->dino_point.y -= step;
            for (int i = 0; i < Dino_size_x; ++i)
                for (int j = Dino_size_y; j <= Dino_size_y + step + 3; ++j)
                    LCD_DrawPoint(x + i, (u8)(y + j), BLACK);
        }
        else if (g->dino_jumping_v < 0 && g->dino_jumping_v > -Dropping_acc)
        {
            u8 step = (u8)(-g->dino_jumping_v);
            g->dino_point.y += step;
            for (int i = 0; i < Dino_size_x; ++i)
                for (int j = (int)(g->dino_jumping_v - 1); j < 0; ++j)
                    LCD_DrawPoint(x + i, (u8)(y + j), BLACK);
            for (int i = 0; i < Dino_size_x; ++i)
                for (int j = Dino_size_y; j <= Dino_size_y + step + 3; ++j)
                    LCD_DrawPoint(x + i, (u8)(y + j), BLACK);
        }
        else if (g->dino_jumping_v < 0)
        {
            // update vertical speed
            u8 step = (u8)(-g->dino_jumping_v);
            g->dino_point.y += step;
            for (int i = 0; i < Dino_size_x; ++i)
                for (int j = (int)(g->dino_jumping_v - 1); j < 0; ++j)
                    LCD_DrawPoint(x + i, (u8)(y + j), BLACK);
        }
        else
        { /* keep still */
            for (int i = 0; i < Dino_size_x; ++i)
                for (int j = Dino_size_y; j <= Dino_size_y + 3; ++j)
                    LCD_DrawPoint(x + i, (u8)(y + j), BLACK);
        }
        g->dino_jumping_v = g->dino_jumping_v - Dropping_acc;
        if (g->dino_point.y >= 40)
        {
            g->dino_status = Bowing;
            g->dino_last_status = Dropping;
            // g->dino_status = Running;
            g->dino_feet = Left;
            // reset
            g->dino_jumping_v = Jumping_step;
            g->dino_point.x = 10;
            g->dino_point.y = 40;
        }
        return;
    }
}

int get_min(int a, int b)
{
    if (a < b)
        return a;
    else
        return b;
}

int get_max(int a, int b)
{
    if (a > b)
        return a;
    else
        return b;
}

#define Ground_speed 8
void LCD_ShowCactus(Game *g)
{
    for (int k = 0; k < 2; ++k)
    {
        if (g->cactus[k].barrier_status == Barrier_empty)
            continue;

        int x = g->cactus[k].barrier_point.x;
        int y = g->cactus[k].barrier_point.y;
        int i = 0;
        if (g->cactus[k].barrier_status == Cactus_0)
        {
            for (; i < 11; ++i)
                for (int j = 0; j < 24; ++j)
                {
                    if (cactus_0[j][i] == 1)
                    {
                        LCD_DrawPoint(x + i, y + j, WHITE);
                        if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                            occupy_table[y + j][x + i - 10] = 1;
                    }
                    else
                        LCD_DrawPoint(x + i, y + j, BLACK);
                }
        }
        if (g->cactus[k].barrier_status == Cactus_1)
        {
            for (; i < 14; ++i)
                for (int j = 0; j < 24; ++j)
                {
                    if (cactus_1[j][i] == 1)
                    {
                        LCD_DrawPoint(x + i, y + j, WHITE);
                        if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                            occupy_table[y + j][x + i - 10] = 1;
                    }
                    else
                        LCD_DrawPoint(x + i, y + j, BLACK);
                }
        }
        if (g->cactus[k].barrier_status == Cactus_2)
        {
            for (; i < 11; ++i)
                for (int j = 0; j < 24; ++j)
                {
                    if (cactus_2[j][i] == 1)
                    {
                        LCD_DrawPoint(x + i, y + j, WHITE);
                        if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                            occupy_table[y + j][x + i - 10] = 1;
                    }
                    else
                        LCD_DrawPoint(x + i, y + j, BLACK);
                }
        }
        if (g->cactus[k].barrier_status == Cactus_3)
        {
            for (; i < 14; ++i)
                for (int j = 0; j < 24; ++j)
                {
                    if (cactus_3[j][i] == 1)
                    {
                        LCD_DrawPoint(x + i, y + j, WHITE);
                        if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                            occupy_table[y + j][x + i - 10] = 1;
                    }
                    else
                        LCD_DrawPoint(x + i, y + j, BLACK);
                }
        }
        if (g->cactus[k].barrier_status == Cactus_4)
        {
            for (; i < 18; ++i)
                for (int j = 0; j < 24; ++j)
                {
                    if (cactus_4[j][i] == 1)
                    {
                        LCD_DrawPoint(x + i, y + j, WHITE);
                        if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                            occupy_table[y + j][x + i - 10] = 1;
                    }
                    else
                        LCD_DrawPoint(x + i, y + j, BLACK);
                }
        }
        if (g->cactus[k].barrier_status == Cactus_5)
        {
            print_cactus(0, 0);
            for (; i < 11; ++i)
                for (int j = 0; j < 24; ++j)
                {
                    if (cactus_5[j][i] == 1)
                    {
                        LCD_DrawPoint(x + i, y + j, WHITE);
                        if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                            occupy_table[y + j][x + i - 10] = 1;
                    }
                    else
                        LCD_DrawPoint(x + i, y + j, BLACK);
                }
        }
        for (int ii = i; ii < i + Ground_speed; ++ii)
            for (int j = 0; j < 24; ++j)
            {
                LCD_DrawPoint(x + ii, y + j, BLACK);
            }

        g->cactus[k].barrier_point.x -= Ground_speed;
        if (g->cactus[k].barrier_point.x < 180 && g->cactus[k].barrier_point.x > 160)
        {
            g->cactus[k].barrier_status = Barrier_empty;
            g->no_cactus--;
        }
    }

    // LCD_ShowNum(50, 30, g->no_cactus, 3, WHITE);
    // LCD_ShowNum(50, 30, g->last_barrier, 3, WHITE);
}

#define Speed_exp 1.0015

float get_exp(int score)
{
    float ret = Ground_speed;
    for (int i = 0; i < score; ++i)
    {
        ret *= Speed_exp;
    }
    return ret;
}

void LCD_ShowCactus_faster(Game *g)
{
    int g_speed = (int)get_exp(g->score);
    for (int k = 0; k < 2; ++k)
    {
        if (g->cactus[k].barrier_status == Barrier_empty)
            continue;

        int x = g->cactus[k].barrier_point.x;
        int y = g->cactus[k].barrier_point.y;
        int i = 0;
        if (g->cactus[k].barrier_status == Cactus_0)
        {
            for (; i < 11; ++i)
                for (int j = 0; j < 24; ++j)
                {
                    if (cactus_0[j][i] == 1)
                    {
                        LCD_DrawPoint(x + i, y + j, WHITE);
                        if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                            occupy_table[y + j][x + i - 10] = 1;
                    }
                    else
                        LCD_DrawPoint(x + i, y + j, BLACK);
                }
        }
        if (g->cactus[k].barrier_status == Cactus_1)
        {
            for (; i < 14; ++i)
                for (int j = 0; j < 24; ++j)
                {
                    if (cactus_1[j][i] == 1)
                    {
                        LCD_DrawPoint(x + i, y + j, WHITE);
                        if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                            occupy_table[y + j][x + i - 10] = 1;
                    }
                    else
                        LCD_DrawPoint(x + i, y + j, BLACK);
                }
        }
        if (g->cactus[k].barrier_status == Cactus_2)
        {
            for (; i < 11; ++i)
                for (int j = 0; j < 24; ++j)
                {
                    if (cactus_2[j][i] == 1)
                    {
                        LCD_DrawPoint(x + i, y + j, WHITE);
                        if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                            occupy_table[y + j][x + i - 10] = 1;
                    }
                    else
                        LCD_DrawPoint(x + i, y + j, BLACK);
                }
        }
        if (g->cactus[k].barrier_status == Cactus_3)
        {
            for (; i < 14; ++i)
                for (int j = 0; j < 24; ++j)
                {
                    if (cactus_3[j][i] == 1)
                    {
                        LCD_DrawPoint(x + i, y + j, WHITE);
                        if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                            occupy_table[y + j][x + i - 10] = 1;
                    }
                    else
                        LCD_DrawPoint(x + i, y + j, BLACK);
                }
        }
        if (g->cactus[k].barrier_status == Cactus_4)
        {
            for (; i < 18; ++i)
                for (int j = 0; j < 24; ++j)
                {
                    if (cactus_4[j][i] == 1)
                    {
                        LCD_DrawPoint(x + i, y + j, WHITE);
                        if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                            occupy_table[y + j][x + i - 10] = 1;
                    }
                    else
                        LCD_DrawPoint(x + i, y + j, BLACK);
                }
        }
        if (g->cactus[k].barrier_status == Cactus_5)
        {
            for (; i < 11; ++i)
                for (int j = 0; j < 24; ++j)
                {
                    if (cactus_5[j][i] == 1)
                    {
                        LCD_DrawPoint(x + i, y + j, WHITE);
                        if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                            occupy_table[y + j][x + i - 10] = 1;
                    }
                    else
                        LCD_DrawPoint(x + i, y + j, BLACK);
                }
        }
        for (int ii = i; ii < i + g_speed; ++ii)
            for (int j = 0; j < 24; ++j)
            {
                LCD_DrawPoint(x + ii, y + j, BLACK);
            }

        g->cactus[k].barrier_point.x -= g_speed;
        if (g->cactus[k].barrier_point.x < 180 && g->cactus[k].barrier_point.x > 160)
        {
            g->cactus[k].barrier_status = Barrier_empty;
            g->no_cactus--;
        }
    }

    // LCD_ShowNum(50, 30, g->no_cactus, 3, WHITE);
    // LCD_ShowNum(50, 30, g->last_barrier, 3, WHITE);
}

void LCD_ShowDragon(Game *g)
{
    for (int k = 0; k < 2; ++k)
    {
        if (g->dragon[k].barrier_status == Barrier_empty)
            continue;

        int x = g->dragon[k].barrier_point.x;
        int y = g->dragon[k].barrier_point.y;
        if (g->dragon[k].barrier_status == Dragon_0)
        {
            int i = 0;
            for (; i < 23; ++i)
                for (int j = 0; j < 21; ++j)
                {
                    if (dragon_0[j][i] == 1)
                    {
                        LCD_DrawPoint(x + i, y + j, WHITE);
                        if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                            occupy_table[y + j][x + i - 10] = 1;
                    }
                    else
                        LCD_DrawPoint(x + i, y + j, BLACK);
                }
            for (int ii = i; ii < i + Ground_speed; ++ii)
                for (int j = 0; j < 21; ++j)
                {
                    LCD_DrawPoint(x + ii, y + j, BLACK);
                }
            g->dragon[k].barrier_point.x -= Ground_speed;
            g->dragon[k].barrier_status = Dragon_1;
            // LCD_ShowString(50, 30, "faq", WHITE);
            if (g->dragon[k].barrier_point.x < 180 && g->dragon[k].barrier_point.x > 160)
            {
                g->dragon[k].barrier_status = Barrier_empty;
                g->no_dragon--;
            }
            continue;
        }
        else if (g->dragon[k].barrier_status == Dragon_1)
        {
            int i = 0;
            for (; i < 23; ++i)
                for (int j = 0; j < 21; ++j)
                {
                    if (dragon_1[j][i] == 1)
                    {
                        LCD_DrawPoint(x + i, y + j, WHITE);
                        if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                            occupy_table[y + j][x + i - 10] = 1;
                    }
                    else
                        LCD_DrawPoint(x + i, y + j, BLACK);
                }
            for (int ii = i; ii < i + Ground_speed; ++ii)
                for (int j = 0; j < 21; ++j)
                {
                    LCD_DrawPoint(x + ii, y + j, BLACK);
                }
            g->dragon[k].barrier_point.x -= Ground_speed;
            g->dragon[k].barrier_status = Dragon_0;
            if (g->dragon[k].barrier_point.x < 180 && g->dragon[k].barrier_point.x > 160)
            {
                g->dragon[k].barrier_status = Barrier_empty;
                g->no_dragon--;
            }
            continue;
        }
    }
}

void LCD_ShowDragon_faster(Game *g)
{
    int g_speed = (int)get_exp(g->score);
    for (int k = 0; k < 2; ++k)
    {
        if (g->dragon[k].barrier_status == Barrier_empty)
            continue;

        int x = g->dragon[k].barrier_point.x;
        int y = g->dragon[k].barrier_point.y;
        if (g->dragon[k].barrier_status == Dragon_0)
        {
            int i = 0;
            for (; i < 23; ++i)
                for (int j = 0; j < 21; ++j)
                {
                    if (dragon_0[j][i] == 1)
                    {
                        LCD_DrawPoint(x + i, y + j, WHITE);
                        if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                            occupy_table[y + j][x + i - 10] = 1;
                    }
                    else
                        LCD_DrawPoint(x + i, y + j, BLACK);
                }

            for (int ii = i; ii < i + g_speed; ++ii)
                for (int j = 0; j < 21; ++j)
                {
                    LCD_DrawPoint(x + ii, y + j, BLACK);
                }
            if (g->dragon[k].fire_status == Rest && g->dragon[k].barrier_point.x < 110 && g->dragon[k].barrier_point.y < 30)
            {
                if (rand() % 10 == 0)
                {
                    g->dragon[k].fire_status = Fire;
                    g->dragon[k].firetime = 0;
                }
            }
            if (g->dragon[k].fire_status == Fire)
            {
                for (i = 0; i < 12; ++i)
                    for (int j = 0; j < 21; ++j)
                    {
                        if (fire[j][i] == 1)
                        {
                            LCD_DrawPoint(x + i - 12, y + j, RED);
                            if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                                occupy_table[y + j][x + i - 10] = 1;
                        }
                        else
                            LCD_DrawPoint(x + i, y + j, BLACK);
                    }
                g->dragon[k].firetime++;
            }
            // LCD_ShowString(50, 30, "faq", WHITE);
            if (g->dragon[k].fire_status == Fire && g->dragon[k].firetime >= 8)
            {
                if (rand() % 5 == 0)
                {
                    g->dragon[k].fire_status = Rest;
                    g->dragon[k].firetime = 0;
                }
            }
            g->dragon[k].barrier_point.x -= g_speed;
            g->dragon[k].barrier_status = Dragon_1;
            // LCD_ShowString(50, 30, "faq", WHITE);
            if (g->dragon[k].barrier_point.x < 180 && g->dragon[k].barrier_point.x > 160)
            {
                g->dragon[k].barrier_status = Barrier_empty;
                g->no_dragon--;
                g->dragon[k].fire_status = Rest;
                g->dragon[k].firetime = 0;
            }
            continue;
        }
        else if (g->dragon[k].barrier_status == Dragon_1)
        {
            int i = 0;
            for (; i < 23; ++i)
                for (int j = 0; j < 21; ++j)
                {
                    if (dragon_1[j][i] == 1)
                    {
                        LCD_DrawPoint(x + i, y + j, WHITE);
                        if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                            occupy_table[y + j][x + i - 10] = 1;
                    }
                    else
                        LCD_DrawPoint(x + i, y + j, BLACK);
                }
            for (int ii = i; ii < i + g_speed; ++ii)
                for (int j = 0; j < 21; ++j)
                {
                    LCD_DrawPoint(x + ii, y + j, BLACK);
                }
            if (g->dragon[k].fire_status == Rest && g->dragon[k].barrier_point.x < 110 && g->dragon[k].barrier_point.y < 30)
            {
                if (rand() % 10 == 0)
                {
                    g->dragon[k].fire_status = Fire;
                    g->dragon[k].firetime = 0;
                }
            }
            if (g->dragon[k].fire_status == Fire)
            {
                for (i = 0; i < 12; ++i)
                    for (int j = 0; j < 21; ++j)
                    {
                        if (fire[j][i] == 1)
                        {
                            LCD_DrawPoint(x + i - 12, y + j, RED);
                            if (x + i >= 10 && x + i < 40 && y + j >= 0 && y + j < 64)
                                occupy_table[y + j][x + i - 10] = 1;
                        }
                        else
                            LCD_DrawPoint(x + i, y + j, BLACK);
                    }
                g->dragon[k].firetime++;
            }
            // LCD_ShowString(50, 30, "faq", WHITE);
            if (g->dragon[k].fire_status == Fire && g->dragon[k].firetime >= 8)
            {
                if (rand() % 5 == 0)
                {
                    g->dragon[k].fire_status = Rest;
                    g->dragon[k].firetime = 0;
                }
            }
            g->dragon[k].barrier_point.x -= g_speed;
            g->dragon[k].barrier_status = Dragon_0;
            if (g->dragon[k].barrier_point.x < 180 && g->dragon[k].barrier_point.x > 160)
            {
                g->dragon[k].barrier_status = Barrier_empty;
                g->no_dragon--;
                g->dragon[k].fire_status = Rest;
                g->dragon[k].firetime = 0;
            }
            continue;
        }
    }
}

void LCD_ShowPlay();

void LCD_ShowSetting();

void LCD_SettingMenu_ez();
void LCD_SettingMenu_hard();

bool LCD_ShowMenu()
{
    int select_num = 0;
    int flag = 0;
    LCD_ShowPlay();
    // LCD_DrawLine(30, 60, 40, 75, WHITE);

    while (Get_Button(1) == 0)
    {
        delay_1ms(50);
        if (Get_Button(0))
        {
            select_num++;
            if (select_num % 2 == 1)
            {
                LCD_ShowSetting();
                // LCD_DrawLine(30, 100, 30, 115, WHITE);
            }
            else
            {
                LCD_ShowPlay();
                // LCD_DrawLine(30, 60, 30, 75, WHITE);
            }
            delay_1ms(300);
        }
        if (Get_Button(1) != 0)
        {
            break;
        }
    }
    LCD_Clear(BLACK);
    if (select_num % 2 == 1)
    {
        select_num = 0;
        LCD_SettingMenu_ez();
        delay_1ms(500);
        while (!Get_Button(1))
        {
            delay_1ms(50);
            if (Get_Button(1))
            {
                flag = select_num % 2;
                // LCD_ShowNum(30, 50, flag, 3, WHITE);
                // LCD_ShowMenu();
                break;
            }
            if (Get_Button(0))
            {
                select_num++;
                if (select_num % 2 == 1)
                {
                    // LCD_DrawLine(30, 100, 30, 115, WHITE);
                    LCD_SettingMenu_hard();
                }
                else
                {
                    // LCD_DrawLine(30, 60, 30, 75, WHITE);
                    LCD_SettingMenu_ez();
                }
                delay_1ms(300);
            }
        }
    }
    // LCD_ShowString(30, 50, "faq", WHITE);
    return flag;
}

void init_game(Game *g)
{
    // srand(time(NULL));
    g->game_status = TRUE;
    g->game_diff = LCD_ShowMenu();
    g->dino_status = Running;
    g->dino_last_status = Running;
    g->dino_feet = Left;
    g->dino_point.x = 10;
    g->dino_point.y = 40;
    // g->dino_jumping_status = FALSE;
    g->dino_jumping_v = Jumping_step;
    // g->game_speed = 1;
    // gettimeofday(&(g->start_time), NULL);
    g->score = 0;
    g->no_cactus = 0;
    g->no_dragon = 0;
    g->last_barrier = 0;
    g->cactus[0].barrier_status = Barrier_empty;
    g->cactus[1].barrier_status = Barrier_empty;
    g->dragon[0].barrier_status = Barrier_empty;
    g->dragon[1].barrier_status = Barrier_empty;
    g->dragon[0].fire_status = Rest;
    g->dragon[1].fire_status = Rest;
    // stone_init(g);
    g->stone_index = 0;
    g->collision = FALSE;
}

void LCD_DrawStone(Game *g)
{
    for (u8 i = 0; i < 160; ++i)
        for (u8 j = 0; j < 5; ++j)
        {
            if (stone[j][(g->stone_index + i) % 300] == 1)
                LCD_DrawPoint(i, 65 + j, WHITE);
            else
                LCD_DrawPoint(i, 65 + j, BLACK);
        }
    g->stone_index = (g->stone_index + Ground_speed) % 300;
}

void LCD_DrawStone_faster(Game *g)
{
    int g_speed = (int)get_exp(g->score);
    for (u8 i = 0; i < 160; ++i)
        for (u8 j = 0; j < 5; ++j)
        {
            if (stone[j][(g->stone_index + i) % 300] == 1)
                LCD_DrawPoint(i, 65 + j, WHITE);
            else
                LCD_DrawPoint(i, 65 + j, BLACK);
        }
    g->stone_index = (g->stone_index + g_speed) % 300;
}

void update_last_barrier(Game *g)
{
    g->last_barrier = 0;
    for (int k = 0; k < 2; ++k)
    {
        if (g->cactus[k].barrier_status == Barrier_empty)
            continue;
        // LCD_ShowNum(50 + 5 * k, 30, k, 3, WHITE);
        g->last_barrier = get_max(g->last_barrier, g->cactus[k].barrier_point.x);
    }
    for (int k = 0; k < 2; ++k)
    {
        if (g->dragon[k].barrier_status == Barrier_empty)
            continue;
        // LCD_ShowNum(50 + 5 * k, 30, k, 3, WHITE);
        g->last_barrier = get_max(g->last_barrier, g->dragon[k].barrier_point.x);
    }
}

// bool dino_collision(Game *g)
// {
//     u8 x0 = g->dino_point.x;
//     u8 y0 = g->dino_point.y;
//     for (int k = 0; k < 2; ++k)
//     {
//         if (g->cactus[k].barrier_status == Barrier_empty)
//             continue;
//         // LCD_ShowNum(50 + 5 * k, 30, k, 3, WHITE);
//         g->last_barrier = get_max(g->last_barrier, g->cactus[k].barrier_point.x);
//     }
// }

void update_game(Game *g)
{
    // update score
    ++g->score;
    // update dino_status
    int a0 = Get_Button(0);
    int a1 = Get_Button(1);
    if (g->dino_status == Running && g->dino_last_status == Running && a0 == 1)
    {
        g->dino_status = Jumping;
    }
    else if (((g->dino_status == Running && g->dino_last_status == Bowing) || (g->dino_status == Running && g->dino_last_status == Running)) && (a1 == 1))
    {
        g->dino_status = Bowing;
    }
    else if (g->dino_status == Jumping && g->dino_last_status == Jumping && a1 == 1)
    {
        g->dino_status = Dropping;
    }
    // update barriers
    if (g->no_cactus == 2)
    {
    }
    else
    {
        if (g->last_barrier > 100)
        {
        }
        else
        {
            if (rand() % 10 == 0)
            { // 1/10
                // then generate
                g->no_cactus++;
                int i = 1;
                if (g->cactus[0].barrier_status == Barrier_empty)
                    i = 0;
                // randomly select a cactus(((((())))))
                // Cactus_0 now
                g->cactus[i].barrier_status = Cactus_0 + rand() % 6;
                g->cactus[i].barrier_point.x = 160;
                g->cactus[i].barrier_point.y = 40;
                g->last_barrier = 160;
            }
        }
    }
    if (g->no_dragon == 2)
    {
    }
    else
    {
        if (g->last_barrier > 100)
        {
        }
        else
        {
            if (rand() % 7 == 0)
            { // 1/10
                // then generate
                g->no_dragon++;
                int i = 1;
                if (g->dragon[0].barrier_status == Barrier_empty)
                    i = 0;
                // randomly select a cactus(((((())))))
                // Cactus_0 now
                g->dragon[i].barrier_status = Dragon_0;
                g->dragon[i].barrier_point.x = 160;
                if (rand() % 4 == 1)
                {
                    g->dragon[i].barrier_point.y = 42;
                }
                else
                {
                    g->dragon[i].barrier_point.y = rand() % 15 + 15;
                }
                g->last_barrier = 160;
            }
        }
    }

    update_last_barrier(g);
    // update ground
    // done in draw
    // collision
}

void show_game(Game *g)
{
    // show score
    LCD_ShowNum(110, 0, g->score, 5, WHITE);
    // show barriers
    if (g->game_diff == 0)
    {
        LCD_ShowCactus(g);
        LCD_ShowDragon(g);

        // show dino
        LCD_ShowDino(g);
        // show ground
        LCD_DrawLine(0, 64, 160, 64, WHITE);
        LCD_DrawStone(g);
    }
    else
    {
        LCD_ShowCactus_faster(g);
        LCD_ShowDragon_faster(g);

        // show dino
        LCD_ShowDino(g);
        // show ground
        LCD_DrawLine(0, 64, 160, 64, WHITE);
        LCD_DrawStone_faster(g);
    }
}

void show_game_gg(Game *g)
{
    if (g->game_diff)
        LCD_ShowString(48, 27, (u8 *)"You Die", WHITE);
    else
        LCD_ShowString(42, 27, (u8 *)"Good Game", WHITE);
}

void reset_occ_table()
{
    for (int i = 0; i < 64; ++i)
        for (int j = 0; j < 30; ++j)
            occupy_table[i][j] = 0;
}

void LCD_DrawBigEyes(Game *g)
{
    if (g->dino_status == Bowing)
        return;
    u8 x = g->dino_point.x;
    u8 y = g->dino_point.y;

    for (int i = 0; i < Dino_size_x; ++i)
        for (int j = 0; j < Dino_size_y; ++j)
        {
            if (dino_6[j][i] == 1)
            {
                LCD_DrawPoint(x + i, y + j, WHITE);
            }
            else
                LCD_DrawPoint(x + i, y + j, BLACK);
        }
    // for (int i = Dino_size_x; i < 29; ++i)
    //     for (int j = Dino_size_y - 15; j < Dino_size_y; ++j)
    //         LCD_DrawPoint(x + i, y + j, BLACK);

    // g->dino_status = Running_right;
    g->dino_last_status = Running;
    g->dino_feet = Right;
    return;
}

// void draw();

void run_game(Game *g)
{
    // LCD_ShowPlay();
    // draw();
    init_game(g);

    LCD_Clear(BLACK);
    delay_1ms(100);
    while (!Get_BOOT0())
    {
        delay_1ms(50);
        if (Get_BOOT0())
            break;
        reset_occ_table();
        show_game(g);
        update_game(g);
        // LCD_ShowNum(50, 30, g->no_dragon, 3, WHITE);
        if (g->collision)
        {
            LCD_DrawBigEyes(g);
            break;
        }
        if (!g->game_status)
            break;
    }

    show_game_gg(g);
}

int main(void)
{
    IO_init(); // init OLED
    // YOUR CODE HERE
    LCD_Clear(BLACK);
    Game g;
    // LCD_ShowMenu();
    // LCD_ShowPlay();
    // LCD_ShowSetting();
    run_game(&g);

    return 0;
}
